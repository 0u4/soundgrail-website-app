<!doctype html>
<html lang="en">
  <head>

    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">

    <!-- Stylesheet -->
    <link rel="stylesheet" href="neat.min.css?v=1657714408">

    <style media="screen">
    input[type=range] {
        -webkit-appearance: none;
        width: 100%;
    }

    input[type=range]:focus {
        outline: none;
    }

    input[type=range]::-webkit-slider-runnable-track {
        width: 100%;
        height: 2px;
        cursor: pointer;
        box-shadow: 0px 0px 0px rgba(68, 0, 0, 0), 0px 0px 0px rgba(94, 0, 0, 0);
        background: #e0e1e2;
        border-radius: 0px;
        border: 0px solid rgba(0, 0, 0, 0);
    }

    input[type=range]::-webkit-slider-thumb {
        box-shadow: 0px 0px 0px rgba(0, 0, 0, 0), 0px 0px 0px rgba(13, 13, 13, 0);
        border: 0px solid rgba(0, 0, 0, 0);
        height: 20px;
        width: 20px;
        border-radius: 50px;
        background: #e0e1e2;
        cursor: pointer;
        -webkit-appearance: none;
        margin-top: -9.5px;
    }




    /* BAR STUFF */

    .cp-bar-active {
      background: #2083fe;
    }
    .cp-bar-active .cp-chord-text {
      color: #FFFFFF;
    }
    .cp-bar-active .cp-chord-degree {
      color: #DDDDDD;
    }

    .container {
      padding: 0 0 0 0;
    }

    .cp-chord-all {
      padding-left: 2px;
      padding-right: 2px;
    }

    </style>




    <!-- <link rel="stylesheet" type="text/css" href="./style/examples.css"> -->
  	<link rel="stylesheet" type="text/css" href="css/examples.css">
    <style type="text/css">

      img {
        width: 80%;
        max-width: 700px;
        margin-left: auto;
          margin-right: auto;
          display: block;
      }

      #Keyboard {
        margin: 3px!important;
      }
    </style>


  	<script>
  		// jshint ignore: start
  	</script>


  </head>
  <body>

    <div class="o-page">




        <!-- <div class="container">

          <div class="row u-justify-center">
            <div class="col-lg-6 u-text-center">
            </div>
          </div>
        </div> -->


        <div class="container">

          <!-- KEYBAORD -->


            <div class="row u-justify-center">
              <div class="col-lg-12 u-text-center">

                  <div id="Content">
                    <!-- <div id="Title">Sampler</div> -->
                    <!-- <div id="Explanation"> -->
                      <!-- <a href="https://tonejs.github.io/docs/Sampler" target="_blank">Tone.Sampler</a> makes it easy to create an instrument from audio samples. Pass in an object which maps the note's pitch or midi value to the url, then you can trigger the attack and release of that note like other instruments. By automatically repitching the samples, it is possible to play pitches which were not explicitly included which can save loading time. -->
                    <!-- </div> -->
                    <div id="Keyboard"></div>
                  </div>



              </div>



            </div>




















          <div class="row">


            <div class="col-3">
              <div class="c-card c-card--center is-animated cp-chord-all" id="cp-chord-1">
                <h5 class="u-mb-xsmall cp-chord-text"></h5>
                <p class="u-mb-xsmall cp-chord-degree"></p>
              </div>
            </div>
            <div class="col-3">
              <div class="c-card c-card--center is-animated cp-chord-all" id="cp-chord-2">
                <h5 class="u-mb-xsmall cp-chord-text"></h5>
                <p class="u-mb-xsmall cp-chord-degree"></p>
              </div>
            </div>
            <div class="col-3">
              <div class="c-card c-card--center is-animated cp-chord-all" id="cp-chord-3">
                <h5 class="u-mb-xsmall cp-chord-text"></h5>
                <p class="u-mb-xsmall cp-chord-degree"></p>
              </div>
            </div>
            <div class="col-3">
              <div class="c-card c-card--center is-animated cp-chord-all" id="cp-chord-4">
                <h5 class="u-mb-xsmall cp-chord-text"></h5>
                <p class="u-mb-xsmall cp-chord-degree"></p>
              </div>
            </div>


          </div>

          <div class="row">
            <div class="col-12">
              <div class="row u-mb-small">


                            <div class="col-lg-8 lg-offset-3 u-mb-xsmall">
                              <!-- <button class="c-btn c-btn--success u-mb-xsmall c-btn--fullwidth">Generate new progression</button> -->
                              <button class="c-btn c-btn--fullwidth c-btn--success" id="btn-generate"><i class="feather icon-plus"></i> Generate new progression</button>
                            </div>

                            <div class="col-lg-4">
                              <button class="c-btn c-btn--fullwidth c-btn--info" id="btn-start"><i class="feather icon-play" id="btn-start-icon"></i> <span id="btn-start-text">Play</span> </button>
                            </div>




                          </div>
            </div>
          </div>

          <div class="row">
        <div class="col-12">
          <div class="row u-mb-medium">
            <div class="col-12">
              <div class="c-card">

                <h4 class="c-card__title">Options</h4>

                <div class="row u-mb-small">

                  <div class="col-lg-3 u-mb-xsmall">
                    <label class="c-field__label" for="">Key</label>
                    <div class="c-select">
                      <select class="c-select__input" id="setting-key">
                        <option value="C"><span class="text">C</span></option>
                        <option value="Db"><span class="text">C#/Db</span></option>
                        <option value="D"><span class="text">D</span></option>
                        <option value="Eb"><span class="text">D#/Eb</span></option>
                        <option value="E"><span class="text">E</span></option>
                        <option value="F"><span class="text">F</span></option>
                        <option value="Gb"><span class="text">F#/Gb</span></option>
                        <option value="G"><span class="text">G</span></option>
                        <option value="Ab"><span class="text">G#/Ab</span></option>
                        <option value="A"><span class="text">A</span></option>
                        <option value="Bb"><span class="text">A#/Bb</span></option>
                        <option value="B"><span class="text">B</span></option>
                      </select>
                    </div>
                  </div>
                  <div class="col-lg-3 u-mb-xsmall">
                    <label class="c-field__label" for="">Mode</label>
                    <div class="c-select">
                      <select class="c-select__input" id="setting-quality">
                        <option value="Major">Major (ionian)</option>
                        <option value="Minor">Minor (aeolian)</option>
                        <option value="dorian">Dorian</option>
                        <option value="phrygian">Phrygian</option>
                        <option value="lydian">Lydian</option>
                        <option value="mixolydian">Mixolydian</option>
                        <option value="locrian">Locrian</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <!-- <label class="c-field__label" for="">Bpm</label> -->
                    <div class="">
                      <p class="c-field__label"><span id="setting-bpm-display">128</span> bpm</p>
                      <input type="range" min="50" max="200" step="1" value="128" id="setting-bpm" >
                    </div>
                  </div>
                </div>

                <div class="row">

                  <div class="col-lg-3 u-mb-small">
                    <div class="c-choice c-choice--checkbox">
                      <input class="c-choice__input" id="setting-key-random" type="checkbox">
                      <label class="c-choice__label" for="setting-key-random">Randomize Key</label>
                    </div>
                  </div>
                  <div class="col-lg-3 u-mb-small">
                    <div class="c-choice c-choice--checkbox">
                      <input class="c-choice__input" id="setting-quality-random" type="checkbox">
                      <label class="c-choice__label" for="setting-quality-random">Randomize Mode</label>
                    </div>
                  </div>
                  <div class="col-lg-3 u-mb-small">
                    <div class="c-choice c-choice--checkbox">
                      <input class="c-choice__input" id="setting-bpm-random" type="checkbox">
                      <label class="c-choice__label" for="setting-bpm-random">Randomize BPM</label>
                    </div>
                  </div>
                  <div class="col-lg-3">
                    <div class="c-choice c-choice--checkbox">
                      <input class="c-choice__input" id="setting-include7ths" type="checkbox">
                      <label class="c-choice__label" for="setting-include7ths">Include 7th Chords</label>
                    </div>
                  </div>
                </div>
                <!-- <br> -->

                <div class="row">
                  <div class="col-lg-12 u-mb-xsmall">
                    <button class="c-btn c-btn--fullwidth c-btn--outline" id="btn-download" target="_blank"><i class="feather icon-download"></i> Midi </button>
                  </div>
                </div>
                <iframe id="btn-download-frame" style="display:none;"></iframe>




              </div>
            </div>
          </div>

        </div>
      </div>



        </div>



    </div>

    <!-- only these since it's a module -->


    <!-- Main JavaScript -->
    <script src="neat.min.js?v=1657714408"></script>

    <!-- APP-WIDE VARIABLES -->
    <script type="text/javascript">
      var appvar_userObjectDetermined = false;
      var appvar_userObject = {settings_profile_email: '', settings_profile_uid: '', settings_profile_premium: false, settings_profile_betaTester: false}

      /* not used yet*/
      var SoundGrail = {
        global: {

        }
      };

    </script>


    <!-- <script src="js/require.js" charset="utf-8"></script> -->
    <!-- <script src="js/tonal.js" charset="utf-8"></script> -->
    <!-- <script src="js/tonal-ext-transpiled.js" charset="utf-8"></script> -->
    <script type="text/javascript">

    var global_beatTimer;

    var lib_Tonal;
    var lib_Key;
    var lib_MidiWriter;

    var int_checkLibsLoaded = setInterval(function () {
      checkLibsLoaded()
    }, 300);

    function checkLibsLoaded() {
      if (lib_Tonal && lib_Key && lib_MidiWriter) {
        clearInterval(int_checkLibsLoaded);
        // console.log(lib_Tonal.Chord.notes("Cmaj7"));
      }
    }

    </script>
    <script src="js/bundle.js" charset="utf-8"></script>
    <script type="text/javascript">




    </script>


    <!-- KEYBAORD -->
    <!-- <script src="../build/Tone.js"></script> -->
    <script src="scripts/Tone.js"></script>
    <!-- <script src="scripts/jquery.min.js"></script> -->
    <script src="scripts/draggabilly.js"></script>
    <script src="scripts/StartAudioContext.js"></script>
    <script src="scripts/Interface.js"></script>
    <script src="https://tonejs.github.io/Logo/build/Logo.js"></script>
    <script src="scripts/Keyboard.js"></script>
    <script>

      // console.log('@@@');
      // console.log(Tone.Buffer);
      // console.log(Tone.Buffer.loaded);
      // Tone.Buffer.on(“load” / “progress” / “error”)


      // Tone.Buffer.on('progress', function(){
      //   console.log('@progress');
      // })
      //
      // Tone.Buffer.on('error', function(){
      //   console.log('@error');
      // })

      var GLOBAL_BUFFER_LOADED = false;
      // var tempBuffer = new Tone;
      function initModule_check() {
        // console.log('check', Tone);
        if ((typeof Tone !== 'undefined') && (Tone)) {
          initModule_main();
        } else {
          setTimeout(function () {
            initModule_check();
          }, 200);
        }
      }
      var piano;
      var keyboard;
      function initModule_main() {
        Tone.Buffer.on('load', function(){
          GLOBAL_BUFFER_LOADED = true;
        })
        Tone.Buffer.on('error', function(){
          $('#modal-general-error').modal('show');
        })


        piano = new Tone.Sampler({
          'A3' : 'A3.[mp3|ogg]',
          'A4' : 'A4.[mp3|ogg]',
          'A5' : 'A5.[mp3|ogg]'

        }, {
          'release' : 1,
          'baseUrl' : 'audio/'
        }).toMaster();

        // GUI //

        keyboard = Interface.Keyboard();

        keyboard.keyDown = function (note) {
            piano.triggerAttack(note);
            // console.log(note);
        };

        keyboard.keyUp = function (note) {
            piano.triggerRelease(note);
        };

        Interface.Loader();

      }

      initModule_check();

    </script>

    <!-- <script src="https://cdn.jsdelivr.net/npm/midi-writer-js@1.5.2/build/index.min.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/midi-writer-js@1.5.2/build/browser/index.js" charset="utf-8"></script> -->
    <script type="text/javascript">
      // var MidiWriter
      // var MidiWriter = require('midi-writer-js')
      // console.log(MidiWriter);

    </script>
    <script src="js/download.js"></script>

  </body>
</html>
